import{a as h}from"./cart-CgKhjms7.js";function E(){document.getElementById("fullScreenImage").src=document.getElementById("img1").src}function L(){console.log("err");const m=document.querySelectorAll(".small-img");document.querySelectorAll(".scrollable").forEach(e=>{e.scrollLeft=0});function c(){const e=document.querySelector(".small-active");console.log(e),e==null||e.parentElement.classList.replace("-translate-y-1","-translate-y-0"),e==null||e.classList.add("opacity-50"),e==null||e.classList.remove("small-active");const t=document.querySelector(".big-active");t==null||t.classList.remove("big-active"),t==null||t.classList.add("opacity-50")}m.forEach(e=>{e.addEventListener("click",t=>{console.log("hmms"),c();const n=t.target;console.log(n);const o=n.id[1];n.classList.add("small-active"),n.parentElement.classList.replace("-translate-y-0","-translate-y-1"),n.classList.remove("opacity-50");const s=document.getElementById("b"+o);console.log("b"+n.id),console.log(s),s.classList.add("big-active"),s.classList.remove("opacity-50"),document.getElementById("fullScreenImage").src=s.children[0].src;const u=document.querySelector(".big-active").getBoundingClientRect().width;document.getElementById("big-images-scrollable").scrollLeft=u*Number(s.id[1])})})}const b=()=>{if(window.innerWidth<640)return;document.querySelectorAll(".big-img").forEach(c=>{const e=c.children[0];e.addEventListener("mousemove",t=>{const n=t,{left:o,top:s,width:r,height:u}=c.getBoundingClientRect();e.getBoundingClientRect().width;const d=n.clientX-o,l=n.clientY-s,i=d/r*100,y=l/u*100;e.style.transformOrigin=`${i}% ${y}%`,e.style.transform="scale(2)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"})})},v=()=>{const m=document.getElementById("fullscreen-icon"),c=document.getElementById("fullScreenModal"),e=document.getElementById("closeButton"),t=document.querySelector(".big-active").src;document.getElementById("fullScreenImage").src=t;let n=!1;m.addEventListener("click",()=>{var o;console.log("clicked"),n=!0,history.pushState({fullscreen:!0},""),(o=document.querySelector("body"))==null||o.classList.add("overflow-y-hidden"),c.classList.replace("hidden","flex")}),window.addEventListener("popstate",()=>{var o;console.log("popstate: ",n),n&&((o=document.querySelector("body"))==null||o.classList.remove("overflow-y-hidden"),c.classList.replace("flex","hidden"))}),e.addEventListener("click",()=>{var o;(o=document.querySelector("body"))==null||o.classList.remove("overflow-y-hidden"),c.classList.replace("flex","hidden"),history.back()}),c.addEventListener("click",o=>{var s;o.target===c&&((s=document.querySelector("body"))==null||s.classList.remove("overflow-y-hidden"),c.classList.replace("flex","hidden"),history.back())})};function B(){const m=phpFileToken,c=phpFileUrl;document.querySelectorAll(".small-img-wrapper").forEach((e,t)=>{const n=document.createElement("img");n.addEventListener("error",o=>{o.target.parentElement.classList.add("hidden")}),console.log(t?"opacity-50":"small-active"),n.id="0"+t,n.className="aspect-square m-auto object-contain product-img small-img transition-opacity duration-400 cursor-pointer "+(t?"opacity-50":"small-active"),n.src=`${c}/file/connect-store/product/${g.img_id}/${t}?Authorization=${m}&b2ContentDisposition=attachment`,e.appendChild(n)})}const S=()=>{var n,o,s;function m(){var r;(r=document.getElementById("addProductToCartBtn"))==null||r.addEventListener("click",()=>[h(Number(g.id),a)])}function c(){const r=document.getElementById("decrement"),u=document.getElementById("increment"),d=document.getElementById("quantity");r.addEventListener("click",()=>{a>1&&(a--,d.textContent=JSON.stringify(a))}),u.addEventListener("click",()=>{a++,d.textContent=JSON.stringify(a)})}function e(){var r;(r=document.getElementById("product-order-form"))==null||r.addEventListener("submit",async u=>{u.preventDefault();const d=u.target,l=document.getElementById("submit-btn");l.disabled=!0,l.innerHTML="Sending Order..";try{const i=new FormData;i.append("Name",d.elements.fullName.value),i.append("Address",d.elements.address.value),i.append("PhoneNumber",d.elements.phoneNumber.value),i.append("Products",JSON.stringify([{id:g.id,quantity:a}]));const y={method:"POST",headers:{"Access-Control-Allow-Credentials":"true",Accept:"multipart/form-data"},credentials:"include",body:i};d.reset();const f=location.protocol+"//"+location.host+"/_api/order/",p=await fetch(f,y);p.status===200?l.innerHTML="Order Sent.":(l.innerHTML="Failed to send order: "+p.status,l.disabled=!1)}catch(i){throw l.innerHTML="Failed to send order: Unknown Error",l.disabled=!1,i}})}const t=document.getElementById("product-order-popup");(n=document.getElementById("product-close-order"))==null||n.addEventListener("click",()=>{t.classList.add("hidden")}),(o=document.getElementById("product-order-overlay"))==null||o.addEventListener("click",()=>{t.classList.add("hidden")}),(s=document.getElementById("buy-button"))==null||s.addEventListener("click",()=>{document.getElementById("product-order-count").innerHTML=JSON.stringify(a),document.getElementById("product-order-price").innerHTML=JSON.stringify((g.discounted_price?g.discounted_price:g.price)*a),t==null||t.classList.remove("hidden")}),e(),c(),m()},g=phpProduct;let a=1;B();S();b();v();L();E();
