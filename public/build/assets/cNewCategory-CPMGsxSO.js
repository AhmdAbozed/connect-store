const m=()=>{const r=phpIsSubcategory,n=async(t,e)=>{console.log("er"),t.preventDefault();const o=t.target,a=o.querySelector(".result"),c=new FormData,i=o.querySelector(".submit-btn");i.disabled=!0,i.innerHTML="Submitting...",a.classList.add("hidden");try{if(c.append("Name",o.elements.categoryName.value),c.append("Image",o.elements.categoryImage.files[0]),c.append("Updating_id",o.elements.UpdatingId.value),e==="subcategory")c.append("Category_id",o.elements.category.value);else if(e==="category"){const u=Array.from(document.querySelectorAll(".category-specification")).map(p=>p.children[0].value);c.append("Specifications",JSON.stringify(u))}const s={method:"POST",headers:{"Access-Control-Allow-Credentials":"true",Accept:"multipart/form-data"},credentials:"include",body:c};t.target.reset();const l=location.protocol+"//"+location.host+"/_api/"+e,d=await fetch(l,s);i.innerHTML="Submit",i.disabled=!1,a.classList.remove("hidden"),d.status===200?a.children[0].innerHTML=e+" Added.":a.children[0].innerHTML="Failed to add "+e+". Code: "+d.status}catch(s){throw i.innerHTML="Submit",i.disabled=!1,a.classList.remove("hidden"),console.log(s),a.children[0].innerHTML="Failed to add "+e+". Unknown Error",s}};document.getElementById("new-category-panel").addEventListener("submit",t=>n(t,r?"subcategory":"category"))},g=()=>{const r=function(){const n=document.createElement("div");n.className="flex space-x-4 items-center category-specification";const t=document.createElement("input");t.type="text",t.placeholder="Filter",t.className="w-full p-2 border border-gray-300 rounded-lg",t.required=!0;const e=document.createElement("button");e.type="button",e.innerText="X",e.className="bg-red-500 text-white py-2 px-4 rounded-lg ml-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400",e.addEventListener("click",function(){n.remove()}),n.appendChild(t),n.appendChild(e),document.getElementById("specificationInputs").appendChild(n)};r(),document.getElementById("add-inputs-btn").addEventListener("click",function(n){n.preventDefault(),r()})};m();g();
