function h(){document.getElementById("fullScreenImage").src=document.getElementById("img1").src}function E(){const i=document.querySelectorAll(".small-img");document.querySelectorAll(".scrollable").forEach(e=>{e.scrollLeft=0});function c(){const e=document.querySelector(".small-active");console.log(e),e==null||e.parentElement.classList.replace("-translate-y-1","-translate-y-0"),e==null||e.classList.add("opacity-50"),e==null||e.classList.remove("small-active");const o=document.querySelector(".big-active");o==null||o.classList.remove("big-active"),o==null||o.classList.add("opacity-50")}i.forEach(e=>{e.addEventListener("click",o=>{c();const t=o.target,n=t.id[1];t.classList.add("small-active"),t.parentElement.classList.replace("-translate-y-0","-translate-y-1"),t.classList.remove("opacity-50");const s=document.getElementById("b"+n);console.log("b"+t.id),console.log(s),s.classList.add("big-active"),s.classList.remove("opacity-50"),document.getElementById("fullScreenImage").src=s.children[0].src;const a=document.querySelector(".big-active").getBoundingClientRect().width;document.getElementById("big-images-scrollable").scrollLeft=a*Number(s.id[1])})})}const L=()=>{if(window.innerWidth<640)return;document.querySelectorAll(".big-img").forEach(c=>{const e=c.children[0];e.addEventListener("mousemove",o=>{const t=o,{left:n,top:s,width:u,height:a}=c.getBoundingClientRect();e.getBoundingClientRect().width;const l=t.clientX-n,r=t.clientY-s,d=l/u*100,g=r/a*100;e.style.transformOrigin=`${d}% ${g}%`,e.style.transform="scale(2)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"})})},b=()=>{const i=document.getElementById("fullscreen-icon"),c=document.getElementById("fullScreenModal"),e=document.getElementById("closeButton"),o=document.querySelector(".big-active").src;document.getElementById("fullScreenImage").src=o;let t=!1;i.addEventListener("click",()=>{var n;console.log("clicked"),t=!0,history.pushState({fullscreen:!0},""),(n=document.querySelector("body"))==null||n.classList.add("overflow-y-hidden"),c.classList.replace("hidden","flex")}),window.addEventListener("popstate",()=>{var n;console.log("popstate: ",t),t&&((n=document.querySelector("body"))==null||n.classList.remove("overflow-y-hidden"),c.classList.replace("flex","hidden"))}),e.addEventListener("click",()=>{var n;(n=document.querySelector("body"))==null||n.classList.remove("overflow-y-hidden"),c.classList.replace("flex","hidden"),history.back()}),c.addEventListener("click",n=>{var s;n.target===c&&((s=document.querySelector("body"))==null||s.classList.remove("overflow-y-hidden"),c.classList.replace("flex","hidden"),history.back())})};function v(){const i=phpFileToken,c=phpFileUrl;document.querySelectorAll(".small-img-wrapper").forEach((e,o)=>{const t=document.createElement("img");t.addEventListener("error",n=>{n.target.parentElement.classList.add("hidden")}),t.className="aspect-square m-auto object-contain product-img small-img transition-opacity duration-400 cursor-pointer opacity-50"+(o==0?"small-active":"0"),t.src=`${c}/file/connect-store/product/${y.img_id}/${o}?Authorization=${i}&b2ContentDisposition=attachment`,e.appendChild(t)})}const B=()=>{var t,n,s;function i(){const u=document.getElementById("decrement"),a=document.getElementById("increment"),l=document.getElementById("quantity");u.addEventListener("click",()=>{m>1&&(m--,l.textContent=JSON.stringify(m))}),a.addEventListener("click",()=>{m++,l.textContent=JSON.stringify(m)})}function c(){var u;(u=document.getElementById("order-form"))==null||u.addEventListener("submit",async a=>{a.preventDefault();const l=a.target,r=document.getElementById("submit-btn");r.disabled=!0,r.innerHTML="Sending Order..";try{const d=new FormData;d.append("Name",l.elements.fullName.value),d.append("Address",l.elements.address.value),d.append("PhoneNumber",l.elements.phoneNumber.value),d.append("Products",JSON.stringify([{id:y.id,quantity:m}]));const g={method:"POST",headers:{"Access-Control-Allow-Credentials":"true",Accept:"multipart/form-data"},credentials:"include",body:d};l.reset();const f=location.protocol+"//"+location.host+"/_api/order/",p=await fetch(f,g);p.status===200?r.innerHTML="Order Sent.":(r.innerHTML="Failed to send order: "+p.status,r.disabled=!1)}catch(d){throw r.innerHTML="Failed to send order: Unknown Error",r.disabled=!1,d}})}const e=document.getElementById("order-popup"),o=m;(t=document.getElementById("close-order"))==null||t.addEventListener("click",()=>{e.classList.add("hidden")}),(n=document.getElementById("order-overlay"))==null||n.addEventListener("click",()=>{e.classList.add("hidden")}),(s=document.getElementById("buy-button"))==null||s.addEventListener("click",()=>{document.getElementById("order-count").innerHTML=JSON.stringify(o),document.getElementById("order-price").innerHTML=JSON.stringify((y.discounted_price?y.discounted_price:y.price)*m),e==null||e.classList.remove("hidden")}),c(),i()},y=phpProduct;let m=1;B();L();E();b();v();h();
