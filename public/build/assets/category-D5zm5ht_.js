const b=()=>{var c,t;const n=document.getElementById("filters-sidebar-wrapper");(c=document.getElementById("filters-button"))==null||c.addEventListener("click",()=>{console.log("clicky"),n.classList.contains("hidden")?n.classList.replace("hidden","flex"):n.classList.replace("flex","hidden")}),(t=document.getElementById("filter-overlay"))==null||t.addEventListener("click",()=>{n.classList.replace("flex","hidden")})},y=(n,c)=>{c.forEach(t=>{JSON.parse(t.specifications).forEach(e=>{const s=n.find(l=>l.filterName==e.specName);if(s){const l=s.filterChildren.find(i=>i.value==e.specValue);l?l.productCount+=1:s.filterChildren.push({value:e.specValue,productCount:1})}})})},u=()=>{const n=document.getElementById("min-price").value,c=document.getElementById("max-price").value,t=C(v(),m,Number(n),Number(c));h(t)},E=(n,c)=>{let t;console.log(window.innerWidth),window.innerWidth<=640?t=document.getElementById("filters-sidebar"):t=document.getElementById("filters-lg"),n.forEach(r=>{if(r.filterChildren.length){const e=document.createElement("fieldset");e.className=" rounded-md  py-1  text-sm border-b-2 border-gray-300 filterset";const s=document.createElement("legend");s.textContent=r.filterName,s.className="px-2 py-1 text-base font-semibold -top-4 w-full border-gray-300",e.appendChild(s),r.filterChildren.forEach(l=>{const i=document.createElement("label");i.className="flex items-center mb-2 ";const o=document.createElement("input");o.type="checkbox",o.name=r.filterName,o.value=l.value,o.className="form-checkbox text-blue-500 h-4 w-4 translate-y-[1px] mr-2 ml-5",o.addEventListener("change",function(a){this.checked&&a.target.parentElement.parentElement.querySelectorAll("input").forEach(p=>{p!==this&&(p.checked=!1)}),u()});const d=`${l.value} <span class="ml-1 inline-block text-gray-400">(${l.productCount})</span>`;i.appendChild(o),i.insertAdjacentHTML("beforeend",d),e.appendChild(i)}),console.log(t),console.log(e),t.appendChild(e),console.log("it is ",t)}})},v=()=>{const n=document.querySelectorAll(".filterset");console.log(n);const c=[];return n.forEach(t=>{var s;const r=(s=t.querySelector("legend"))==null?void 0:s.innerText;console.log(JSON.stringify(r));const e=t.querySelector("label input:checked");console.log(e),r&&e&&c.push({specName:r,specValue:e.value})}),c},N=n=>{const c=document.getElementById("sort-by").value;c!="unsorted"&&n.sort((t,r)=>{const e=t.discounted_price??t.price,s=r.discounted_price??r.price;switch(c){case"highest":return s-e;case"lowest":return e-s;case"newest":return new Date(t.created_at).getTime()-new Date(r.created_at).getTime()}})},C=(n,c,t,r)=>{const e=c.filter(s=>{const l=s.discounted_price??s.price;return t||(t=0),r||(r=1e7),l<t||l>r?!1:(console.log("spec is",JSON.parse(s.specifications)),console.log("filters are ",n),n.every(o=>{const d=JSON.parse(s.specifications).some(a=>a.specName==o.specName&&a.specValue==o.specValue);return console.log("result is ",d),JSON.parse(s.specifications).some(a=>a.specName==o.specName&&a.specValue==o.specValue)}))});return N(e),e};function h(n){var t,r;document.getElementById("products-wrapper")&&((t=document.getElementById("products-wrapper"))==null||t.remove());const c=document.createElement("section");c.className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 p-1 pr-0",c.id="products-wrapper",console.log(n),n.forEach(e=>{let s=null;e.discounted_price&&(s=Math.round((1-e.discounted_price/e.price)*100));const l=phpFileToken,i=phpFileUrl,o=`
            <a class="scroll-img w-full  border-t-[1px] border-r-[1px] border-gray-200  p-1 flex-shrink-0" id="b02" href="/product/${e.id}">
                <div class="relative flex flex-col h-full rounded-md">
                    ${s?`<div class="z-20 text-xs m-1 absolute top-0 rounded-md px-[4px] py-1 bg-blue-400 text-white text-center font-medium">${s}% OFF</div>`:""}
                    <img src="${i}/file/connect-store/product/0${e.img_id}?Authorization=${l}&b2ContentDisposition=attachment" class="object-contain rounded -translate-y-0" />
                    <div class="z-10 text-gray-800 mx-auto text-sm text-center px-1 line-clamp-2">${e.name}</div>
                    ${e.discounted_price?`<div class="z-10 mx-auto text-sm text-center mt-auto text-blue-500">EGP ${e.discounted_price.toLocaleString()}</div>
                        <div class="z-10 mx-auto text-sm text-center text-gray-400 line-through mb-2">EGP ${e.price.toLocaleString()}</div>`:`<div class="z-10 mx-auto text-sm text-center mt-1 text-blue-500 mb-auto">EGP ${e.price.toLocaleString()}</div>`}
                </div>
            </a>
        `;c.insertAdjacentHTML("beforeend",o)}),(r=document.getElementById("main-content"))==null||r.append(c)}const w=JSON.parse(phpCategorySpecs),m=phpProducts,x=w.map(n=>({filterName:n,filterChildren:[]}));b();h(m);y(x,m);E(x);var f;(f=document.getElementById("set-price"))==null||f.addEventListener("click",u);var g;(g=document.getElementById("sort-by"))==null||g.addEventListener("change",u);
