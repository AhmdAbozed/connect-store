import{s as n}from"./utils-CTGP1-Zk.js";let e=localStorage.getItem("securitySystem")?JSON.parse(localStorage.getItem("securitySystem")):{recorder:[],cameras:[],PDU:[],cables:[],monitor:[],hdd:[],accessories:[]},h=!1;const x=phpFileUrl,B=phpFileToken;phpViteAsset;function D(){const t=document.getElementById(n.PDUName);e.recorder.length?(t.classList.replace("hidden","block"),e.recorder[0].specifications.includes("DVR")?(e.PDU.length&&e.PDU[0].subcategory.name==n.switchesName&&(e.PDU=[]),t.querySelector(".componentTitle").innerHTML="Power Supply",t.querySelector(".componentHref").setAttribute("href",`/categories/1/subcategories/${phpPDUId}/builder`),console.log(phpPDUId)):(e.PDU.length&&e.PDU[0].subcategory.name==n.PDUName&&(e.PDU=[]),t.querySelector(".componentTitle").innerHTML="Network Switch",t.querySelector(".componentHref").setAttribute("href",`/categories/1/subcategories/${phpSwitchesId}/builder`))):(t.classList.replace("block","hidden"),e.PDU=[])}D();function S(){function t(s,o){var m,u,p,y;const l=document.getElementById(o);let a="",i=0;return s.forEach(c=>{i+=Number(c.discounted_price?c.discounted_price:c.price),a+=`
                <div class="flex">
                    <div class=" line-clamp-2">${c.name}</div>
                    <div class="w-24 ml-auto text-end">+${c.discounted_price?c.discounted_price:c.price} EGP</div>
                </div>
            `}),l.querySelector(".previewItems").innerHTML=a,s.length?((m=document.getElementById(o).querySelector(".previewRequired"))==null||m.classList.add("hidden"),(u=document.getElementById(o).querySelector(".noneSelected"))==null||u.classList.add("hidden")):((p=document.getElementById(o).querySelector(".previewRequired"))==null||p.classList.remove("hidden"),(y=document.getElementById(o).querySelector(".noneSelected"))==null||y.classList.remove("hidden")),console.log("price isssss",i),i}let r=0;r+=t(e.recorder,"previewRecorder"),r+=t(e.cameras,"previewCameras"),r+=t(e.PDU,"previewPDU"),r+=t(e.cables,"previewCables"),r+=t(e.monitor,"previewMonitor"),r+=t(e.hdd,"previewHdd"),r+=t(e.accessories,"previewAccessories"),document.getElementById("bottomTotal").innerHTML=`${r} EGP`,document.getElementById("popupTotal").innerHTML=`${r} EGP`}function E(){function t(s,o,l){return`
            <div class="flex text-base sm:text-lg py-2 selectedItem ${o!=l-1||h?"":"animate-fadeIn"} cursor-pointer border-white border-2 " >
                <img src="${x}/file/connect-store/product/${s.img_id}/0?Authorization=${B}&b2ContentDisposition=attachment" class="object-contain h-16 w-16 my-auto sm:h-24 sm:w-24" class="selectedItemImg"  />
                <div class="flex text-sm flex-col justify-center ml-4">
                    <div class="  font-semibold sm:text-xl text-black selectedItemTitle  line-clamp-2" > ${s.name} </div>
                    <div class="selectedItemSpecs sm:text-xl" > </div>
                </div>
                <div class="flex flex-col ml-auto sm:flex-row">
                
                    <div class="ml-auto selectedItemPrice w-[5.5rem] sm:w-auto text-black flex items-center sm:mr-6 sm:my-0 my-auto" > +${s.discounted_price?s.discounted_price:s.price} EGP</div>
                    
                </div>
                <button class='selectedItemRemove bg-red-600 font-semibold text-white w-8 h-8 my-auto rounded-full text-2xl' data-index="${o}"><span class="-translate-y-[3px] block">x</span></button>
            </div>
        `}function r(s,o){var a,i,m,u,p,y,c;console.log(s);const l=document.getElementById(s);if(console.log(s),o.length){(a=l.querySelector(".noneSelected"))==null||a.classList.add("hidden"),(i=l.querySelector(".requiredAlert"))==null||i.classList.add("hidden"),l.querySelector(".titleSelectBtn").classList.remove("hidden"),s=="Cameras"||s=="Cables"||s=="Surveillance Equipment"?l.querySelector(".titleSelectBtn").innerHTML="Add More":l.querySelector(".titleSelectBtn").innerHTML="Change Component",(m=l.querySelector(".selectBtn"))==null||m.classList.add("hidden");let v="";o.forEach((d,g)=>{console.log(d),v+=t(d,g,o.length)}),l.querySelector(".selectedItems").innerHTML=v,l.querySelectorAll(".selectedItemRemove").forEach(d=>{d.addEventListener("click",g=>{console.log(o),console.log(d.dataset.index),o.splice(Number(d.dataset.index),1),localStorage.setItem("securitySystem",JSON.stringify(e)),console.log(o),console.log(e);const q=window.scrollX,P=window.scrollY;g.currentTarget.parentElement.remove(),h=!0,E(),h=!1,S(),window.scrollTo(q,P)})})}else(u=l.querySelector(".noneSelected"))==null||u.classList.remove("hidden"),(p=l.querySelector(".requiredAlert"))==null||p.classList.remove("hidden"),(y=l.querySelector(".titleSelectBtn"))==null||y.classList.add("hidden"),(c=l.querySelector(".selectBtn"))==null||c.classList.remove("hidden")}console.log(e),r(n.recorderName,e.recorder),r(n.cameraName,e.cameras),r(n.PDUName,e.PDU),r(n.cableName,e.cables),r(n.accName,e.accessories),r(n.monitorName,e.monitor),r(n.hddName,e.hdd),S()}const f=document.getElementById("order-popup");var w;(w=document.getElementById("close-order"))==null||w.addEventListener("click",t=>{t.preventDefault(),f.classList.add("hidden")});var b;(b=document.getElementById("previewBtn"))==null||b.addEventListener("click",t=>{t.preventDefault(),f.classList.remove("hidden")});var L;(L=document.getElementById("order-wrapper"))==null||L.addEventListener("click",t=>{t.target.id=="order-overlay"&&f.classList.add("hidden")});E();
