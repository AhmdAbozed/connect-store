const u=()=>{const a=async t=>{console.log("er"),t.preventDefault();const n=t.target,e=n.querySelector(".result"),o=new FormData,i=n.querySelector(".submit-btn");i.disabled=!0,i.innerHTML="Submitting...",e.classList.add("hidden");try{o.append("Name",n.elements.categoryName.value),o.append("Image",n.elements.categoryImage.files[0]),o.append("Updating_id",n.elements.UpdatingId.value);const r=Array.from(document.querySelectorAll(".category-specification")).map(p=>p.children[0].value);o.append("Specifications",JSON.stringify(r));const d={method:"POST",headers:{"Access-Control-Allow-Credentials":"true",Accept:"multipart/form-data"},credentials:"include",body:o};t.target.reset();const l=location.protocol+"//"+location.host+"/_api/category/",c=await fetch(l,d),g=await c.json();i.innerHTML="Submit",i.disabled=!1,e.classList.remove("hidden"),c.status===200?e.children[0].innerHTML="Category Added.":e.children[0].innerHTML="Failed to add category. Code: "+c.status}catch{i.innerHTML="Submit",i.disabled=!1,e.classList.remove("hidden"),e.children[0].innerHTML="Failed to add category. Unknown Error",e.children[1].classList.add("hidden")}};document.getElementById("new-category-panel").addEventListener("submit",a)},m=()=>{const a=function(){const t=document.createElement("div");t.className="flex space-x-4 items-center category-specification";const n=document.createElement("input");n.type="text",n.placeholder="Specification",n.className="w-full p-2 border border-gray-300 rounded-lg",n.required=!0;const e=document.createElement("button");e.type="button",e.innerText="X",e.className="bg-red-500 text-white py-2 px-4 rounded-lg ml-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400",e.addEventListener("click",function(){t.remove()}),t.appendChild(n),t.appendChild(e),document.getElementById("specificationInputs").appendChild(t)};a(),document.getElementById("add-inputs-btn").addEventListener("click",function(t){t.preventDefault(),a()})};u();m();
