const u=()=>{const c=async t=>{console.log("er"),t.preventDefault();const n=t.target,e=n.querySelector(".result"),i=new FormData,o=n.querySelector(".submit-btn");o.disabled=!0,o.innerHTML="Submitting...",e.classList.add("hidden");try{i.append("Name",n.elements.categoryName.value),i.append("Image",n.elements.categoryImage.files[0]),i.append("Updating_id",n.elements.UpdatingId.value);const s=Array.from(document.querySelectorAll(".category-specification")).map(p=>p.children[0].value);i.append("Specifications",JSON.stringify(s));const d={method:"POST",headers:{"Access-Control-Allow-Credentials":"true",Accept:"multipart/form-data"},credentials:"include",body:i};t.target.reset();const l=location.protocol+"//"+location.host+"/_api/category/",r=await fetch(l,d);o.innerHTML="Submit",o.disabled=!1,e.classList.remove("hidden"),r.status===200?e.children[0].innerHTML="Category Added.":e.children[0].innerHTML="Failed to add category. Code: "+r.status}catch(a){throw o.innerHTML="Submit",o.disabled=!1,e.classList.remove("hidden"),console.log(a),e.children[0].innerHTML="Failed to add category. Unknown Error",a}};document.getElementById("new-category-panel").addEventListener("submit",c)},m=()=>{const c=function(){const t=document.createElement("div");t.className="flex space-x-4 items-center category-specification";const n=document.createElement("input");n.type="text",n.placeholder="Specification",n.className="w-full p-2 border border-gray-300 rounded-lg",n.required=!0;const e=document.createElement("button");e.type="button",e.innerText="X",e.className="bg-red-500 text-white py-2 px-4 rounded-lg ml-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400",e.addEventListener("click",function(){t.remove()}),t.appendChild(n),t.appendChild(e),document.getElementById("specificationInputs").appendChild(t)};c(),document.getElementById("add-inputs-btn").addEventListener("click",function(t){t.preventDefault(),c()})};u();m();
