const m=()=>{const r=phpIsSubcategory,n=async(e,t)=>{console.log("er"),e.preventDefault();const o=e.target,a=o.querySelector(".result"),c=new FormData,i=o.querySelector(".submit-btn");i.disabled=!0,i.innerHTML="Submitting...",a.classList.add("hidden");try{if(c.append("Name",o.elements.categoryName.value),c.append("Image",o.elements.categoryImage.files[0]),c.append("Updating_id",o.elements.UpdatingId.value),t==="subcategory"){c.append("Category_id",o.elements.category.value);const u=Array.from(document.querySelectorAll(".category-specification")).map(p=>p.children[0].value);c.append("Specifications",JSON.stringify(u))}const s={method:"POST",headers:{"Access-Control-Allow-Credentials":"true",Accept:"multipart/form-data"},credentials:"include",body:c};e.target.reset();const l=location.protocol+"//"+location.host+"/_api/"+t,d=await fetch(l,s);i.innerHTML="Submit",i.disabled=!1,a.classList.remove("hidden"),d.status===200?a.children[0].innerHTML=t+" Added.":a.children[0].innerHTML="Failed to add "+t+". Code: "+d.status}catch(s){throw i.innerHTML="Submit",i.disabled=!1,a.classList.remove("hidden"),console.log(s),a.children[0].innerHTML="Failed to add "+t+". Unknown Error",s}};document.getElementById("new-category-panel").addEventListener("submit",e=>n(e,r?"subcategory":"category"))},g=()=>{const r=function(){const n=document.createElement("div");n.className="flex space-x-4 items-center category-specification";const e=document.createElement("input");e.type="text",e.placeholder="Filter",e.className="w-full p-2 border border-gray-300 rounded-lg",e.required=!0;const t=document.createElement("button");t.type="button",t.innerText="X",t.className="bg-red-500 text-white py-2 px-4 rounded-lg ml-1 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400",t.addEventListener("click",function(){n.remove()}),n.appendChild(e),n.appendChild(t),document.getElementById("specificationInputs").appendChild(n)};r(),document.getElementById("add-inputs-btn").addEventListener("click",function(n){n.preventDefault(),r()})};m();g();
