import{g as v}from"./utils-D11pOpYs.js";const N=()=>{var c,t;const r=document.getElementById("filters-sidebar-wrapper");(c=document.getElementById("filters-button"))==null||c.addEventListener("click",()=>{console.log("clicky"),r.classList.contains("hidden")?r.classList.replace("hidden","flex"):r.classList.replace("flex","hidden")}),(t=document.getElementById("filter-overlay"))==null||t.addEventListener("click",()=>{r.classList.replace("flex","hidden")})},p=()=>{const r=C(k(),g,Number(m),Number(u));y(r)},w=(r,c)=>{let t;console.log(window.innerWidth),window.innerWidth<=640?t=document.getElementById("filters-sidebar"):t=document.getElementById("filters-lg"),r.forEach(n=>{if(n.filterChildren.length){const e=document.createElement("fieldset");e.className=" rounded-md  py-1  text-sm border-b-2 border-gray-300 filterset";const s=document.createElement("legend");s.textContent=n.filterName,s.className="px-2 py-1 text-base font-semibold -top-4 w-full border-gray-300",e.appendChild(s),n.filterChildren.forEach(o=>{const i=document.createElement("label");i.className="flex items-center mb-2 ";const l=document.createElement("input");l.type="checkbox",l.name=n.filterName,l.value=o.value,l.className="form-checkbox text-blue-500 h-4 w-4 translate-y-[1px] mr-2 ml-5",l.addEventListener("change",function(a){this.checked&&a.target.parentElement.parentElement.querySelectorAll("input").forEach(f=>{f!==this&&(f.checked=!1)}),p()});const d=`${o.value} <span class="ml-1 inline-block text-gray-400">(${o.productCount})</span>`;i.appendChild(l),i.insertAdjacentHTML("beforeend",d),e.appendChild(i)}),console.log(t),console.log(e),t.appendChild(e),console.log("it is ",t)}})},k=()=>{const r=document.querySelectorAll(".filterset");console.log(r);const c=[];return r.forEach(t=>{var s;const n=(s=t.querySelector("legend"))==null?void 0:s.innerText;console.log(JSON.stringify(n));const e=t.querySelector("label input:checked");console.log(e),n&&e&&c.push({specName:n,specValue:e.value})}),c},S=r=>{const c=document.getElementById("sort-by").value;c!="unsorted"&&r.sort((t,n)=>{const e=t.discounted_price??t.price,s=n.discounted_price??n.price;switch(c){case"highest":return s-e;case"lowest":return e-s;case"newest":return new Date(t.created_at).getTime()-new Date(n.created_at).getTime()}})},C=(r,c,t,n)=>{const e=c.filter(s=>{const o=s.discounted_price??s.price;return t||(t=0),n||(n=1e7),o<t||o>n?!1:(console.log("spec is",JSON.parse(s.specifications)),console.log("filters are ",r),r.every(l=>{const d=JSON.parse(s.specifications).some(a=>a.specName==l.specName&&a.specValue==l.specValue);return console.log("result is ",d),JSON.parse(s.specifications).some(a=>a.specName==l.specName&&a.specValue==l.specValue)}))});return S(e),e};function y(r){var t,n;document.getElementById("products-wrapper")&&((t=document.getElementById("products-wrapper"))==null||t.remove());const c=document.createElement("section");c.className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 p-1 pr-0",c.id="products-wrapper",console.log(r),r.forEach(e=>{let s=null;e.discounted_price&&(s=Math.round((1-e.discounted_price/e.price)*100));const o=phpFileToken,i=phpFileUrl,l=`
            <a class="scroll-img w-full  border-t-[1px] border-r-[1px] border-gray-200  p-1 flex-shrink-0" id="b02" href="/product/${e.id}">
                <div class="relative flex flex-col h-full rounded-md">
                    ${s?`<div class="z-20 text-xs m-1 absolute top-0 rounded-md px-[4px] py-1 bg-blue-400 text-white text-center font-medium">${s}% OFF</div>`:""}
                    <img src="${i}/file/connect-store/product/${e.img_id}/0?Authorization=${o}&b2ContentDisposition=attachment" class="object-contain rounded -translate-y-0 h-52" />
                    <div class="z-10 text-gray-800 mx-auto text-sm text-center px-1 line-clamp-2">${e.name}</div>
                    ${e.discounted_price?`<div class="z-10 mx-auto text-sm text-center mt-auto text-blue-500">EGP ${e.discounted_price.toLocaleString()}</div>
                        <div class="z-10 mx-auto text-sm text-center text-gray-400 line-through mb-2">EGP ${e.price.toLocaleString()}</div>`:`<div class="z-10 mx-auto text-sm text-center mt-1 text-blue-500 mb-auto">EGP ${e.price.toLocaleString()}</div>`}
                </div>
            </a>
        `;c.insertAdjacentHTML("beforeend",l)}),(n=document.getElementById("main-content"))==null||n.append(c)}function E(r){var e,s;const c=r.target,t=Number(((e=c.parentElement)==null?void 0:e.querySelector("#min-price")).value),n=Number(((s=c.parentElement)==null?void 0:s.querySelector("#max-price")).value);t?m=t:m=0,n?u=n:u=9999999,p()}const L=JSON.parse(phpCategorySpecs),g=phpProducts;let m=0,u=9999999;N();y(g);const B=v(L,g);w(B);var h;(h=document.getElementById("set-price"))==null||h.addEventListener("click",E);var x;(x=document.getElementById("set-price-lg"))==null||x.addEventListener("click",E);var b;(b=document.getElementById("sort-by"))==null||b.addEventListener("change",p);
